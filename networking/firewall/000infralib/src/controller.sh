#!/bin/sh

###########################################################
# Get Test Environment Variable
###########################################################
source ~/.profile

###########################################################
# Common Lib
###########################################################
[ $MH_INFRA_TYPE == "vm" ] && {
	# include vm lib functions
	source $MH_COMMON_ROOT/vm/vm.sh
}

###########################################################
# 000infralib Lib (for test)
###########################################################
source $MH_INFRA_ROOT/src/infra/run.sh
[ $MH_INFRA_TYPE == "ns" ] && {
	source $MH_INFRA_ROOT/src/infra/ns.sh
}
[ $MH_INFRA_TYPE == "vm" ] && {
	source $MH_INFRA_ROOT/src/infra/vm.sh
}
source $MH_INFRA_ROOT/src/infra/common.sh

###########################################################
# log collecting for the controller
###########################################################
always_pass()
{
	echo "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::"
	echo ":: [   PASS   ] :: "$2
	echo "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::"
}
always_fail()
{
	echo "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::"
	echo ":: [   FAIL   ] :: "$2
	echo "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::"
	eval $1=1
}
assert_pass()
{
	if [ $? -eq 0 ]; then
		echo "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::"
		echo ":: [   PASS   ] :: "$2
		echo "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::"
	else
		echo "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::"
		echo ":: [   FAIL   ] :: "$2
		echo "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::"
		eval $1=1
	fi
}
assert_fail()
{
	if [ $? -ne 0 ]; then
		echo "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::"
		echo ":: [   PASS   ] :: "$2
		echo "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::"
	else
		echo "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::"
		echo ":: [   FAIL   ] :: "$2
		echo "::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::"
		eval $1=1
	fi
}

